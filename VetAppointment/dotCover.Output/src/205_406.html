<!DOCTYPE html>
<html>
  <head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <title>C:\Users\Leonard\Desktop\Clean VetApp\VetAppointment.Business.Test\DrugTests.cs</title>
    <script type="text/javascript" src="../js/dotcover.sourceview.js"></script>
    <link rel="stylesheet" type="text/css" href="../css/dotcover.report.css" />
  </head>
  <body>
    <pre id="content" class="source-code">
namespace VetAppointment.Business.Test
{
    public class DrugTests
    {
        [Fact]
        public void When_CreateDrug_Then_ShouldReturnDrug()
        {
            // Arrange
            var sut = CreateSUT();

            // Act
            var result = Drug.Create(sut.Item1, sut.Item2, sut.Item3);

            // Assert
            result.IsSuccess.Should().BeTrue();
            result.Entity.Should().NotBeNull();
            result.Entity.Name.Should().Be(sut.Item1);
        }
        [Fact]
        public void When_CreateDrugWithInvalidQuantity_Then_ShouldReturnFailure()
        {
            // Arrange
            var sut = CreateSUT();
            double invalidQuantity = -5;
            // Act
            var result = Drug.Create(sut.Item1, invalidQuantity, sut.Item3);

            // Assert
            result.IsFailure.Should().BeTrue();
        }
        [Fact]
        public void When_CreateDrugWithInvalidPrice_Then_ShouldReturnFailure()
        {
            // Arrange
            var sut = CreateSUT();
            double invalidPrice = -5;
            // Act
            var result = Drug.Create(sut.Item1, sut.Item2, invalidPrice);

            // Assert
            result.IsFailure.Should().BeTrue();
        }
        [Fact]
        public void When_UpdateDrug_Then_ShouldReturnSuccess()
        {
            // Arrange
            var sut = CreateSUT();
            var drug = Drug.Create(sut.Item1, sut.Item2, sut.Item3).Entity;

            // Act
            var result = drug.Update(drug.Name, drug.Quantity, drug.UnitPrice);

            // Assert
            result.IsSuccess.Should().BeTrue();
        }

        [Fact]
        public void When_UpdateDrugWithInvalidName_Then_ShouldReturnFailure()
        {
            // Arrange
            var sut = CreateSUT();
            var drug = Drug.Create(sut.Item1, sut.Item2, sut.Item3).Entity;
            var invalidName = &quot;&quot;;

            // Act
            var result = drug.Update(invalidName, drug.Quantity, drug.UnitPrice);

            // Assert
            result.IsFailure.Should().BeTrue();
        }
        [Fact]
        public void When_UpdateDrugWithQuantity_Then_ShouldReturnFailure()
        {
            // Arrange
            var sut = CreateSUT();
            var drug = Drug.Create(sut.Item1, sut.Item2, sut.Item3).Entity;
            double invalidQuantity = -9;

            // Act
            var result = drug.Update(sut.Item1, invalidQuantity, sut.Item3);

            // Assert
            result.IsFailure.Should().BeTrue();
        }
        [Fact]
        public void When_UpdateDrugWithPrice_Then_ShouldReturnFailure()
        {
            // Arrange
            var sut = CreateSUT();
            var drug = Drug.Create(sut.Item1, sut.Item2, sut.Item3).Entity;
            double invalidPrice = -9;

            // Act
            var result = drug.Update(sut.Item1, sut.Item2, invalidPrice);

            // Assert
            result.IsFailure.Should().BeTrue();
        }
        private static Tuple&lt;string, double, double&gt; CreateSUT()
        {
            return new Tuple&lt;string, double, double&gt;(&quot;Paracetamol&quot;, 11, 95.84);
        }
     
    }
}

    </pre>
    <script type="text/javascript">
      highlightRanges([[7,9,7,10,1],[9,13,9,35,1],[12,13,12,71,1],[15,13,15,48,1],[16,13,16,48,1],[17,13,17,55,1],[18,9,18,10,1],[21,9,21,10,1],[23,13,23,35,1],[24,13,24,41,1],[26,13,26,77,1],[29,13,29,48,1],[30,9,30,10,1],[33,9,33,10,1],[35,13,35,35,1],[36,13,36,38,1],[38,13,38,74,1],[41,13,41,48,1],[42,9,42,10,1],[45,9,45,10,1],[47,13,47,35,1],[48,13,48,76,1],[51,13,51,80,1],[54,13,54,48,1],[55,9,55,10,1],[59,9,59,10,1],[61,13,61,35,1],[62,13,62,76,1],[63,13,63,34,1],[66,13,66,82,1],[69,13,69,48,1],[70,9,70,10,1],[73,9,73,10,1],[75,13,75,35,1],[76,13,76,76,1],[77,13,77,41,1],[80,13,80,77,1],[83,13,83,48,1],[84,9,84,10,1],[87,9,87,10,1],[89,13,89,35,1],[90,13,90,76,1],[91,13,91,38,1],[94,13,94,74,1],[97,13,97,48,1],[98,9,98,10,1],[100,9,100,10,1],[101,13,101,80,1],[102,9,102,10,1]]);
    </script>
  </body>
</html>