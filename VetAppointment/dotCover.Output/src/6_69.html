<!DOCTYPE html>
<html>
  <head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <title>D:\Facultate\Anul_3\.NET\VetAppointment_S12\VetAppointment - APIs + Tests\VetAppointment - Working\VetAppointment.API\Program.cs</title>
    <script type="text/javascript" src="../js/dotcover.sourceview.js"></script>
    <link rel="stylesheet" type="text/css" href="../css/dotcover.report.css" />
  </head>
  <body>
    <pre id="content" class="source-code">
using Microsoft.EntityFrameworkCore;
using VetAppointment.Application;
using VetAppointment.Domain;
using VetAppointment.Infrastructure.Data;
using VetAppointment.Infrastructure.Repositories.GenericRepositories;

var builder = WebApplication.CreateBuilder(args);


// Add services to the container.

builder.Services.AddControllers();
// Learn more about configuring Swagger/OpenAPI at https://aka.ms/aspnetcore/swashbuckle
builder.Services.AddEndpointsApiExplorer();
builder.Services.AddSwaggerGen();

//builder.Services.AddScoped&lt;IDatabaseContext, DatabaseContext&gt;();
builder.Services.AddDbContext&lt;DatabaseContext&gt;(
	options =&gt; options.UseSqlite(&quot;Data Source = VetAppointmentTest.db&quot;));

//builder.Services.AddDbContext&lt;DatabaseContext&gt;(
//	options =&gt; options.UseSqlite(
//		builder.Configuration.GetConnectionString(&quot;TestConnection&quot;), 
//		b =&gt; b.MigrationsAssembly(typeof(DatabaseContext).Assembly.FullName)
//		)
//	);

builder.Services.AddTransient&lt;IUnitOfWork, UnitOfWork&gt;();

builder.Services.AddScoped&lt;IRepository&lt;Appointment&gt;, AppointmentRepository&gt;();
builder.Services.AddScoped&lt;IRepository&lt;PetOwner&gt;, PetOwnerRepository&gt;();
builder.Services.AddScoped&lt;IRepository&lt;Pet&gt;, PetRepository&gt;();
builder.Services.AddScoped&lt;IRepository&lt;VetClinic&gt;, VetClinicRepository&gt;();
builder.Services.AddScoped&lt;IRepository&lt;Vet&gt;, VetRepository&gt;();
builder.Services.AddScoped&lt;IRepository&lt;Drug&gt;, DrugRepository&gt;();
builder.Services.AddScoped&lt;IRepository&lt;MedicalHistory&gt;, MedicalHistoryRepository&gt;();
builder.Services.AddScoped&lt;IRepository&lt;PrescribedDrug&gt;, PrescribedDrugRepository&gt;();
builder.Services.AddScoped&lt;IRepository&lt;Treatment&gt;, TreatmentRepository&gt;();

builder.Services.AddCors(options =&gt;
{
	options.AddPolicy(&quot;clinicsCors&quot;, policy =&gt;
	{
		policy.AllowAnyOrigin().AllowAnyHeader().AllowAnyMethod();
	});
});
var app = builder.Build();

// Configure the HTTP request pipeline.
if (app.Environment.IsDevelopment())
{
	app.UseSwagger();
	app.UseSwaggerUI();
}

app.UseHttpsRedirection();
app.UseCors(&quot;clinicsCors&quot;);

app.UseAuthorization();

app.MapControllers();

app.Run();

    </pre>
    <script type="text/javascript">
      highlightRanges([[7,1,7,50,1],[12,1,12,35,1],[14,1,14,44,1],[15,1,15,34,1],[18,1,19,13,1],[19,13,19,69,1],[19,69,19,71,1],[28,1,28,58,1],[30,1,30,79,1],[31,1,31,73,1],[32,1,32,63,1],[33,1,33,75,1],[34,1,34,63,1],[35,1,35,65,1],[36,1,36,85,1],[37,1,37,85,1],[38,1,38,75,1],[40,1,41,1,1],[41,1,41,2,1],[41,2,42,2,1],[42,2,43,2,1],[43,2,43,3,1],[43,3,44,3,1],[44,3,44,61,1],[44,61,45,2,1],[45,2,45,3,1],[45,3,45,5,1],[45,5,46,1,1],[46,1,46,2,1],[46,2,46,4,1],[47,1,47,27,1],[50,1,50,37,1],[51,1,51,2,1],[52,2,52,19,1],[53,2,53,21,1],[54,1,54,2,1],[56,1,56,27,1],[57,1,57,28,1],[59,1,59,24,1],[61,1,61,22,1],[63,1,63,11,1]]);
    </script>
  </body>
</html>